[{"path":"https://docs.ropensci.org/rdefra/articles/rdefra_vignette.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"rdefra: Interact with the UK AIR Pollution Database from DEFRA","text":"package rdefra allows retrieve air pollution data Air Information Resource (UK-AIR, https://uk-air.defra.gov.uk/) Department Environment, Food Rural Affairs (DEFRA) United Kingdom. UK-AIR provide public API programmatic access data, therefore package scrapes HTML pages get relevant information. package follows logic similar packages waterData rnrfa: sites first identified catalogue, data imported via station identification number, visualised /used analyses. information related monitoring stations accessible function ukair_catalogue(). station may missing coordinates, can recovered using function ukair_get_coordinates(). Lastly, time series data related different pollutants can obtained using function ukair_get_hourly_data(). package designed collect data efficiently. allows download multiple years data single station one line code , used parallel package, allows acquisition data hundreds sites minutes.","code":""},{"path":"https://docs.ropensci.org/rdefra/articles/rdefra_vignette.html","id":"installation","dir":"Articles","previous_headings":"Introduction","what":"Installation","title":"rdefra: Interact with the UK AIR Pollution Database from DEFRA","text":"Get released version CRAN: development version GitHub using package remotes: Load rdefra package:","code":"install.packages(\"rdefra\") install.packages(\"remotes\") remotes::install_github(\"ropensci/rdefra\") library(\"rdefra\")"},{"path":"https://docs.ropensci.org/rdefra/articles/rdefra_vignette.html","id":"functions","dir":"Articles","previous_headings":"Introduction","what":"Functions","title":"rdefra: Interact with the UK AIR Pollution Database from DEFRA","text":"package logic assumes users access UK-AIR database two steps: Browse catalogue available stations selects stations interest. Retrieves data selected stations.","code":""},{"path":"https://docs.ropensci.org/rdefra/articles/rdefra_vignette.html","id":"get-stations-catalogue","dir":"Articles","previous_headings":"Introduction > Functions","what":"Get stations catalogue","title":"rdefra: Interact with the UK AIR Pollution Database from DEFRA","text":"list monitoring stations can downloaded using function ukair_catalogue() input parameters, example . currently 6611 stations UK-AIR. function, can used filter catalogue using following input parameters: site_name IDs specific site (UK.AIR.ID). default left blank get info available sites. pollutant integer 1 10. Default 9999, means pollutants. group_id identification number group stations. Default 9999 means available networks. closed set TRUE include closed stations, FALSE otherwise. country_id identification number country, can integer 1 6. Default 9999, means countries. region_id identification number region. 1 = Aberdeen City, etc. (full list see https://uk-air.defra.gov.uk/). Default 9999, means local authorities. example shows retrieve 108 stations England ozone measured.","code":"# Get full catalogue stations <- ukair_catalogue() #> Error in httr::content(resp, encoding = \"UTF-8\"): is.response(x) is not TRUE head(stations) #> # A tibble: 6 × 17 #>   UK.AIR.ID EU.Site.ID EMEP.Site.ID Site.Name  Environment.Type Zone  Start.Date          End.Date            Latitude Longitude Northing Easting Altitude..m. Networks AURN.Pollutants… Site.Description SiteID #>   <chr>     <chr>      <chr>        <chr>      <chr>            <chr> <dttm>              <dttm>                 <dbl>     <dbl>    <dbl>   <dbl>        <dbl> <chr>    <chr>            <chr>            <chr>  #> 1 UKA15910  <NA>       <NA>         SH15, SH2… <NA>             Sout… 2003-03-01 00:00:00 2003-10-01 00:00:00     51.3    -0.744   158876  487639         71.0 DEFRA N… <NA>             <NA>             <NA>   #> 2 UKA15956  <NA>       <NA>         SH15, SH2… <NA>             Sout… 2003-08-01 00:00:00 2005-06-01 00:00:00     51.3    -0.631   158871  495503         49.9 DEFRA N… <NA>             <NA>             <NA>   #> 3 UKA16663  <NA>       <NA>         SH15, SH2… <NA>             Sout… 2005-05-03 00:00:00 NA                      51.3    -0.728   159750  488750         83.0 DEFRA N… <NA>             <NA>             <NA>   #> 4 UKA16097  <NA>       <NA>         10 High S… <NA>             Sout… 2004-03-01 00:00:00 NA                      51.2     0.272   146166  558864         NA   DEFRA N… <NA>             <NA>             <NA>   #> 5 UKA12536  <NA>       <NA>         ABBOTS LA… <NA>             Grea… 1975-04-01 00:00:00 1977-03-28 00:00:00     51.7    -0.417   201800  509500         NA   Smoke a… <NA>             <NA>             <NA>   #> 6 UKA12949  <NA>       <NA>         ABERBARGO… <NA>             Sout… 1979-04-03 00:00:00 1982-03-29 00:00:00     51.7    -3.23    200300  315400         NA   Smoke a… <NA>             <NA>             <NA> stations_EnglandOzone <- ukair_catalogue(pollutant = 1, country_id = 1) head(stations_EnglandOzone) #> # A tibble: 6 × 16 #>   UK.AIR.ID EU.Site.ID EMEP.Site.ID Site.Name         Environment.Type Zone  Start.Date          End.Date            Latitude Longitude Northing Easting Altitude..m. Networks AURN.Pollutants… Site.Description #>   <chr>     <chr>      <chr>        <chr>             <chr>            <chr> <dttm>              <dttm>                 <dbl>     <dbl>    <dbl>   <dbl>        <dbl> <chr>    <chr>            <chr>            #> 1 UKA00353  GB0681A    <NA>         Barnsley Gawber   Urban Background York… 1997-07-07 00:00:00 NA                      53.6     -1.51  407478. 432524.          100 Automat… <NA>             The monitoring … #> 2 UKA00626  GB1067A    <NA>         Birmingham A4540… Urban Traffic    West… 2016-09-06 00:00:00 NA                      52.5     -1.88  286470. 408586.          109 Automat… <NA>             Roadside monito… #> 3 UKA00559  GB1013A    <NA>         Birmingham Acock… Urban Background West… 2011-03-18 00:00:00 NA                      52.4     -1.83  282146  411654           134 Automat… <NA>             The monitoring … #> 4 UKA00214  GB0569A    <NA>         Birmingham Centre Urban Background West… 1992-03-18 00:00:00 2009-01-14 00:00:00     52.5     -1.91  286870. 406340           163 Automat… <NA>             The monitoring … #> 5 UKA00229  GB0595A    <NA>         Birmingham East   Urban Background West… 1993-08-04 00:00:00 2004-10-01 00:00:00     52.5     -1.83  288872. 411536.          100 Automat… <NA>             Within playgrou… #> 6 UKA00655  GB1097A    <NA>         Birmingham Ladyw… Urban Background West… 2018-06-01 00:00:00 NA                      52.5     -1.92  287050  405650           134 Automat… <NA>             <NA>"},{"path":"https://docs.ropensci.org/rdefra/articles/rdefra_vignette.html","id":"get-missing-coordinates","dir":"Articles","previous_headings":"Introduction > Functions","what":"Get missing coordinates","title":"rdefra: Interact with the UK AIR Pollution Database from DEFRA","text":"Locating station extremely important able carry spatial analysis. coordinates missing, stations catalogue, might possible retrieve Easting Northing coordinates (British National Grid) DEFRA web pages, transform latitude longitude populate missing coordinates shown .","code":"# How many stations have missing coordinates? length(which(is.na(stations$Latitude) | is.na(stations$Longitude))) #> [1] 2 # Scrape DEFRA website to get Easting/Northing (if available) stations <- ukair_get_coordinates(stations)  # How many stations still have missing coordinates? length(which(is.na(stations$Latitude) | is.na(stations$Longitude))) #> [1] 2"},{"path":"https://docs.ropensci.org/rdefra/articles/rdefra_vignette.html","id":"check-hourly-data-availability","dir":"Articles","previous_headings":"Introduction > Functions","what":"Check hourly data availability","title":"rdefra: Interact with the UK AIR Pollution Database from DEFRA","text":"Pollution data started collected 1972 consists hourly concentration various species (micrograms/m3), ozone (O3), particulate matters (PM2.5 PM10), nitrogen dioxide (NO2), sulphur dioxide (SO2), . ID data available differs UK.AIR.ID. catalogue contain additional station ID (called SiteID hereafter) DEFRA’s web pages contain references UK.AIR.ID SiteID. function uses input UK.AIR.ID outputs SiteID, available. Please note function takes several minutes run.","code":"stations$SiteID <- ukair_get_site_id(stations$UK.AIR.ID)"},{"path":"https://docs.ropensci.org/rdefra/articles/rdefra_vignette.html","id":"cached-catalogue","dir":"Articles","previous_headings":"Introduction > Functions","what":"Cached catalogue","title":"rdefra: Interact with the UK AIR Pollution Database from DEFRA","text":"convenience, cached version catalogue (last updated April 2021) included package can loaded using following command: cached catalogue contains available siteIDs coordinates can used offline lookup table find correspondence UK.AIR.ID SiteID, well investigate station characteristics.","code":"data(\"stations\")"},{"path":"https://docs.ropensci.org/rdefra/articles/rdefra_vignette.html","id":"get-hourly-data","dir":"Articles","previous_headings":"Introduction > Functions","what":"Get hourly data","title":"rdefra: Interact with the UK AIR Pollution Database from DEFRA","text":"SiteID known, time series given station can retrieved one line code: get_hourly_data.png figure \\(\\ref{fig:hdata}\\) shows highest concentrations happen late spring beginning summer. order check whether happens every year, can download multiple years data compare . code explores distribution ozone month. resulting box plots show highest concentrations usually occurr April/May vary year--year. ozone_data.png","code":"# Get 1 year of hourly ozone data from London Marylebone Road monitoring station df <- ukair_get_hourly_data(\"MY1\", years = 2015)  # Aggregate to daily means and plot # please note we use the zoo package here because time series could be irregular library(\"zoo\") my1 <- zoo(x = df$Ozone, order.by = as.POSIXlt(df$datetime))  daily_means <- aggregate(my1, as.Date(as.POSIXlt(df$datetime)), mean)  plot(daily_means, main = \"\", xlab = \"\",      ylab = expression(paste(\"Ozone concentration [\", mu, \"g/\", m^3, \"]\"))) # Get 15 years of hourly ozone data from the same monitoring station library(\"ggplot2\") library(\"dplyr\") library(\"lubridate\")  df <- ukair_get_hourly_data(\"MY1\", years = 2000:2015)  df %>%   mutate(year = year(datetime),          month = month(datetime),          year_month = strftime(datetime, \"%Y-%m\")) %>%   group_by(month, year_month) %>%   summarize(ozone = mean(Ozone, na.rm=TRUE)) %>%   na.omit %>%   ggplot() +   geom_boxplot(aes(x = as.factor(month), y = ozone, group = month),                outlier.shape = NA) +   xlab(\"Month of the year\") +   ylab(expression(paste(\"Ozone concentration (\", mu, \"g/\",m^3,\")\"))) +   ggtitle(\"15 years of hourly ozone data from London Marylebone Road monitoring station\")"},{"path":[]},{"path":"https://docs.ropensci.org/rdefra/articles/rdefra_vignette.html","id":"plotting-stations-locations","dir":"Articles","previous_headings":"Introduction > Applications","what":"Plotting stations’ locations","title":"rdefra: Interact with the UK AIR Pollution Database from DEFRA","text":"scraping DEFRA’s web pages, almost stations valid coordinates. can create interactive map using leaflet. code generates map blue circles stations valid coordinates, red circles show locations available hourly data. map_data.png","code":"# Keep only station with coordinates stations_with_coords <- stations[complete.cases(stations[, c(\"Longitude\",                                                              \"Latitude\")]), ] # Keep only station with known SiteID stations_with_SiteID <- which(!is.na(stations_with_coords$SiteID))  # An interactive map library(\"leaflet\") leaflet(data = stations_with_coords) %>% addTiles() %>%    addCircleMarkers(lng = ~Longitude,                     lat = ~Latitude,                      popup = ~SiteID,                    radius = 1, color=\"blue\", fill = FALSE) %>%   addCircleMarkers(lng = ~Longitude[stations_with_SiteID],                     lat = ~Latitude[stations_with_SiteID],                     radius = 0.5, color=\"red\",                     popup = ~SiteID[stations_with_SiteID])"},{"path":"https://docs.ropensci.org/rdefra/articles/rdefra_vignette.html","id":"analyse-the-spatial-distribution-of-the-monitoring-stations","dir":"Articles","previous_headings":"Introduction > Applications","what":"Analyse the spatial distribution of the monitoring stations","title":"rdefra: Interact with the UK AIR Pollution Database from DEFRA","text":"two plots showing spatial distribution monitoring stations. concentrated largely urban areas mostly estimate background level concentration pollutants. dotchart_zone.png dotchart_envtype.png","code":"# Zone dotchart(as.matrix(table(stations$Zone))[,1]) # Environment.Type dotchart(as.matrix(table(stations$Environment.Type[stations$Environment.Type != \"Unknown Unknown\"]))[,1])"},{"path":"https://docs.ropensci.org/rdefra/articles/rdefra_vignette.html","id":"use-multiple-cores-to-speed-up-data-retrieval-from-numerous-sites","dir":"Articles","previous_headings":"Introduction > Applications","what":"Use multiple cores to speed up data retrieval from numerous sites","title":"rdefra: Interact with the UK AIR Pollution Database from DEFRA","text":"acquisition data hundreds sites takes minutes:","code":"library(\"parallel\")  # Use detectCores() to find out many cores are available on your machine cl <- makeCluster(getOption(\"cl.cores\", detectCores()))  system.time(myList <- parLapply(cl, stations$SiteID[stations_with_SiteID],                                  ukair_get_hourly_data, years=1999:2016))  stopCluster(cl)  df <- bind_rows(myList)"},{"path":"https://docs.ropensci.org/rdefra/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Cheryl Lim. Author. Claudia Vitolo. Author, maintainer.            Claudia original creator package Andrew Russell. Contributor.            package part KEHRA project                     Andrew supervised technical/software development. Allan Tucker. Contributor.            package part KEHRA project                     Allan supervised technical/software development. Maëlle Salmon. Contributor.            Maëlle Salmon reviewed package rOpenSci,                     see https://github.com/ropensci/software-review/issues/68 Hao Zhu. Contributor.            Hao Zhu reviewed package rOpenSci, see                     https://github.com/ropensci/software-review/issues/68","code":""},{"path":"https://docs.ropensci.org/rdefra/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Vitolo, C., Russell, ., & Tucker, . (2016, August). Rdefra: interact UK AIR pollution database DEFRA. Journal Open Source Software, 1(4). doi:10.21105/joss.00051","code":"@Article{,   doi = {10.21105/joss.00051},   url = {http://dx.doi.org/10.21105/joss.00051},   year = {2016},   month = {08},   publisher = {The Open Journal},   volume = {1},   number = {4},   author = {{Vitolo} and {Claudia} and {Russell} and {Andrew} and {Tucker} and {Allan}},   title = {rdefra: Interact with the {UK} {AIR} Pollution Database from {DEFRA}},   journal = {The Journal of Open Source Software}, }"},{"path":"https://docs.ropensci.org/rdefra/index.html","id":"rdefra-interact-with-the-uk-air-pollution-database-from-defra","dir":"","previous_headings":"","what":"Interact with the UK AIR Pollution Database from DEFRA","title":"Interact with the UK AIR Pollution Database from DEFRA","text":"package rdefra allows retrieve air pollution data Air Information Resource UK-AIR Department Environment, Food Rural Affairs United Kingdom. UK-AIR provide public API programmatic access data, therefore package scrapes HTML pages get relevant information. package follows logic similar packages waterData rnrfa: sites first identified catalogue, data imported via station identification number, data visualised /used analyses. metadata related monitoring stations accessible function ukair_catalogue(), missing stations’ coordinates can obtained using function ukair_get_coordinates(), time series data related different pollutants can obtained using function ukair_get_hourly_data(). DEFRA’s servers can handle multiple data requests, therefore concurrent calls can sent simultaneously using parallel package. Although limit rate depends maximum number concurrent calls, traffic available infrastructure, data retrieval efficient. Multiple years data hundreds sites can downloaded minutes. similar functionalities see also openair package, relies local copy data servers King’s College (UK), ropenaq provides UK-AIR latest measured levels (see https://uk-air.defra.gov.uk/latest/currentlevels) well data countries.","code":""},{"path":"https://docs.ropensci.org/rdefra/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Interact with the UK AIR Pollution Database from DEFRA","text":"Get released version CRAN: development version GitHub using package remotes: Load rdefra package:","code":"install.packages(\"rdefra\") install.packages(\"remotes\") remotes::install_github(\"ropensci/rdefra\") library(rdefra)"},{"path":"https://docs.ropensci.org/rdefra/index.html","id":"functions","dir":"","previous_headings":"","what":"Functions","title":"Interact with the UK AIR Pollution Database from DEFRA","text":"package logic assumes users access UK-AIR database following steps: Browse catalogue available stations selects stations interest (see function ukair_catalogue()). Get missing coordinates (see function ukair_get_coordinates()). Retrieves data selected stations (see functions ukair_get_site_id() ukair_get_hourly_data()). -depth description various functionalities example applications, please refer package vignette.","code":""},{"path":"https://docs.ropensci.org/rdefra/index.html","id":"meta","dir":"","previous_headings":"","what":"Meta","title":"Interact with the UK AIR Pollution Database from DEFRA","text":"package functions herein part experimental open-source project. provided , without guarantee. Please report issues bugs. License: GPL-3 package reviewed Maëlle Salmon Hao Zhu submission ROpenSci (see review ) Journal Open Source Software (see review ). Cite rdefra: citation(package = \"rdefra\")","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/rdefra-package.html","id":null,"dir":"Reference","previous_headings":"","what":"rdefra: Interact with the UK AIR Pollution Database from DEFRA — rdefra-package","title":"rdefra: Interact with the UK AIR Pollution Database from DEFRA — rdefra-package","text":"packages allows retrieve air pollution data Air Information Resource (UK-AIR, https://uk-air.defra.gov.uk/) Department Environment, Food Rural Affairs (DEFRA) United Kingdom. UK-AIR provide public API programmatic access data, therefore package scrapes HTML pages get relevant information. package described Vitolo et al. (2016) \"rdefra: Interact UK AIR Pollution Database DEFRA\" doi:10.21105/joss.00051 .","code":""},{"path":[]},{"path":"https://docs.ropensci.org/rdefra/reference/rdefra-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"rdefra: Interact with the UK AIR Pollution Database from DEFRA — rdefra-package","text":"Maintainer: Claudia Vitolo cvitolodev@gmail.com (ORCID) (Claudia original creator package) Authors: Cheryl Lim cheryl.academic@gmail.com contributors: Andrew Russell (package part KEHRA project Andrew supervised technical/software development.) [contributor] Allan Tucker (package part KEHRA project Allan supervised technical/software development.) [contributor] Maëlle Salmon (Maëlle Salmon reviewed package rOpenSci, see https://github.com/ropensci/software-review/issues/68) [contributor] Hao Zhu (Hao Zhu reviewed package rOpenSci, see https://github.com/ropensci/software-review/issues/68) [contributor]","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/stations.html","id":null,"dir":"Reference","previous_headings":"","what":"List of all the DEFRA air quality monitoring stations with complete\ncoordinates — stations","title":"List of all the DEFRA air quality monitoring stations with complete\ncoordinates — stations","text":"list air quality monitoring stations ever installed UK operated DEFRA networks (per February 2016). network expands, metadata new stations added.","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/stations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List of all the DEFRA air quality monitoring stations with complete\ncoordinates — stations","text":"","code":"stations"},{"path":"https://docs.ropensci.org/rdefra/reference/stations.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"List of all the DEFRA air quality monitoring stations with complete\ncoordinates — stations","text":"data frame 6561 observations following 14 variables. UK.AIR.ID ID reference monitoring stations EU.Site.ID EU.Site.ID EMEP.Site.ID EMEP.Site.ID Site.Name Site name Environment.Type factor levels Background Rural Background Suburban Background Urban Industrial Suburban Industrial Unknown Industrial Urban Traffic Urban Unknown Unknown Zone Zone Start.Date Start date End.Date End date Latitude Latitude (WGS 84) Longitude Longitude (WGS 84) Northing Northing coordinate (British National Grid) Easting Easting coordinate (British National Grid) Altitude..m. Altitude metres sea level Networks Monitoring Networks AURN.Pollutants.Measured Pollutant measured Site.Description Description site. SiteID Site ID, used retrieve time series data.","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/stations.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"List of all the DEFRA air quality monitoring stations with complete\ncoordinates — stations","text":"https://uk-air.defra.gov.uk/","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/stations.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List of all the DEFRA air quality monitoring stations with complete\ncoordinates — stations","text":"","code":"stations #> # A tibble: 6,611 × 17 #>    UK.AIR.ID EU.Site.ID EMEP.Site.ID Site.Name            Environment.Type Zone  #>    <chr>     <chr>      <chr>        <chr>                <chr>            <chr> #>  1 UKA15910  NA         NA           SH15, SH20, SH25 Ve… NA               Sout… #>  2 UKA15956  NA         NA           SH15, SH22, SH25 Ai… NA               Sout… #>  3 UKA16663  NA         NA           SH15, SH22, SH25 Ai… NA               Sout… #>  4 UKA16097  NA         NA           10 High Street Tonb… NA               Sout… #>  5 UKA12536  NA         NA           ABBOTS LANGLEY 1     NA               Grea… #>  6 UKA12949  NA         NA           ABERBARGOED 1        NA               Sout… #>  7 UKA12399  NA         NA           ABERCARN 1           NA               Sout… #>  8 UKA13340  NA         NA           ABERDARE 1N          NA               Sout… #>  9 UKA13341  NA         NA           ABERDARE 2N          NA               Sout… #> 10 UKA15369  NA         NA           ABERDARE 3N          NA               Sout… #> # ℹ 6,601 more rows #> # ℹ 11 more variables: Start.Date <dttm>, End.Date <dttm>, Latitude <dbl>, #> #   Longitude <dbl>, Northing <dbl>, Easting <dbl>, Altitude..m. <dbl>, #> #   Networks <chr>, AURN.Pollutants.Measured <chr>, Site.Description <chr>, #> #   SiteID <chr>"},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_catalogue.html","id":null,"dir":"Reference","previous_headings":"","what":"Get DEFRA UK-AIR stations metadata — ukair_catalogue","title":"Get DEFRA UK-AIR stations metadata — ukair_catalogue","text":"function fetches catalogue monitoring stations DEFRA's website.","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_catalogue.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get DEFRA UK-AIR stations metadata — ukair_catalogue","text":"","code":"ukair_catalogue(   site_name = \"\",   pollutant = 9999,   group_id = 9999,   closed = \"true\",   country_id = 9999,   region_id = 9999,   location_type = 9999 )"},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_catalogue.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get DEFRA UK-AIR stations metadata — ukair_catalogue","text":"site_name name specific site. default left blank get info available sites. pollutant number 1 10. Default 9999, means pollutants. group_id identification number group stations. Default 9999 means available networks. closed \"true\" include closed stations, \"false\" otherwise. country_id identification number country, can number 1 6. Default 9999, means countries. region_id identification number region. 1 = Aberdeen City, etc. (full list see https://uk-air.defra.gov.uk/). Default 9999, means local authorities. location_type identification number location type. Default 9999, means location types.","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_catalogue.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get DEFRA UK-AIR stations metadata — ukair_catalogue","text":"dataframe listing stations related information.","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_catalogue.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get DEFRA UK-AIR stations metadata — ukair_catalogue","text":"argument Pollutant defined based following convention: 1 = Ozone (O3) 2 = Nitrogen oxides (NOx) 3 = Carbon monoxide (CO) 4 = Sulphur dioxide (SO2) 5 = Particulate Matter (PM10) 6 = Particulate Matter (PM2.5) 7 = PAHs 8 = Metals PM10 9 = Benzene 10 = Black Carbon argument group_id defined based following convention: 1 = UKEAP: Precip-Net 2 = Air Quality Strategy Pollutants 3 = Ammonia Nitric Acid 4 = Automatic Urban Rural Monitoring Network (AURN) 5 = Dioxins Furans 6 = Black Smoke & SO2 7 = Automatic Hydrocarbon Network 8 = Heavy Metals 9 = Nitrogen Dioxide Diffusion Tube 10 = PAH Andersen 11 = Particle Size Composition 12 = PCBs 13 = TOMPs 14 = Non-Automatic Hydrocarbon Network 15 = 1,3-Butadiene Diffusion Tube 16 = Black Carbon 17 = Automatic Urban Rural Monitoring Network (AURN) 18 = Defra NO2 Diffusion Tube 19 = PAH Digitel (solid phase) 20 = PAH Digitel (solid+vapour) 21 = PAH Deposition 22 = Particle size number 23 = Rural Automatic Mercury network 24 = Urban Sulphate 25 = UKEAP: Rural NO2 26 = Automatic Urban Rural Monitoring Network (AURN) 27 = UKEAP: National Ammonia Monitoring Network 28 = UKEAP: Acid Gases & Aerosol Network 29 = Particle Speciation (MARGA) 30 = UKEAP: Historic Aerosol measurements argument country_id defined based following convention: 1 = England 2 = Wales 3 = Scotland 4 = Northern Ireland 5 = Republic Ireland 6 = Channel Islands","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_catalogue.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get DEFRA UK-AIR stations metadata — ukair_catalogue","text":"","code":"if (FALSE) {  stations <- ukair_catalogue()  }"},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_coordinates.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Easting and Northing coordinates from DEFRA — ukair_get_coordinates","title":"Get Easting and Northing coordinates from DEFRA — ukair_get_coordinates","text":"function takes input UK AIR ID returns Easting Northing coordinates (British National Grid, EPSG:27700).","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_coordinates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Easting and Northing coordinates from DEFRA — ukair_get_coordinates","text":"","code":"ukair_get_coordinates(ids)"},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_coordinates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Easting and Northing coordinates from DEFRA — ukair_get_coordinates","text":"ids contains station identification code defined DEFRA. can : ) alphanumeric string, b) vector strings c) data frame. latter case, column containing codes named \"UK.AIR.ID\", columns ignored.","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_coordinates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Easting and Northing coordinates from DEFRA — ukair_get_coordinates","text":"data.frame containing least five columns named \"UK.AIR.ID\", \"Easting\", \"Northing\", \"Latitude\" \"Longitude\".","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_coordinates.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get Easting and Northing coordinates from DEFRA — ukair_get_coordinates","text":"input data frame columns named \"UK.AIR.ID\", \"Northing\" \"Easting\", function infills missing Northing/Easting values (available relevant webpage).","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_coordinates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Easting and Northing coordinates from DEFRA — ukair_get_coordinates","text":"","code":"if (FALSE) {  # Case a: alphanumeric string  ukair_get_coordinates(\"UKA12536\")   # Case b: vector of strings  ukair_get_coordinates(c(\"UKA15910\", \"UKA15956\", \"UKA16663\", \"UKA16097\"))   # Case c: data frame  ukair_get_coordinates(ukair_catalogue()[1:10,])  }"},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_hourly_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Get hourly data for DEFRA stations — ukair_get_hourly_data","title":"Get hourly data for DEFRA stations — ukair_get_hourly_data","text":"function fetches hourly data DEFRA's air pollution monitoring stations.","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_hourly_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get hourly data for DEFRA stations — ukair_get_hourly_data","text":"","code":"ukair_get_hourly_data(site_id = NULL, years = NULL)"},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_hourly_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get hourly data for DEFRA stations — ukair_get_hourly_data","text":"site_id ID specific site. years Years data downloaded.","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_hourly_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get hourly data for DEFRA stations — ukair_get_hourly_data","text":"data.frame containing hourly pollution data.","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_hourly_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get hourly data for DEFRA stations — ukair_get_hourly_data","text":"measurements generally \\(\\mu g/m^3\\) (micrograms per cubic metre). check units, refer table attributes (see example ). Please double check units DEFRA website, might change time.","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_hourly_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get hourly data for DEFRA stations — ukair_get_hourly_data","text":"","code":"if (FALSE) {  # Get data for 1 year  output <- ukair_get_hourly_data(\"ABD\", 2014)   # Get data for multiple years  output <- ukair_get_hourly_data(\"ABD\", 2014:2016)   # Get units  attributes(output)$units   }"},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_site_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Get site identification numbers for DEFRA stations — ukair_get_site_id","title":"Get site identification numbers for DEFRA stations — ukair_get_site_id","text":"Given UK AIR ID (ukair_catalogue()), function fetches catalogue monitoring stations DEFRA's website.","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_site_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get site identification numbers for DEFRA stations — ukair_get_site_id","text":"","code":"ukair_get_site_id(id_s)"},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_site_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get site identification numbers for DEFRA stations — ukair_get_site_id","text":"id_s alphanumeric string (vector strings) containing UK AIR ID defined DEFRA.","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_site_id.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get site identification numbers for DEFRA stations — ukair_get_site_id","text":"named vector containing site id_s.","code":""},{"path":"https://docs.ropensci.org/rdefra/reference/ukair_get_site_id.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get site identification numbers for DEFRA stations — ukair_get_site_id","text":"","code":"if (FALSE) {  ukair_get_site_id(\"UKA00399\")  }"},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"rdefra-038","dir":"Changelog","previous_headings":"","what":"rdefra 0.3.8","title":"rdefra 0.3.8","text":"CRAN release: 2020-04-06 release corresponds latest CRAN submission. resubmission due bug fixing.","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"bug-fixes-0-3-8","dir":"Changelog","previous_headings":"","what":"BUG FIXES","title":"rdefra 0.3.8","text":"Updated tests compatible PROJ6 #9","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"minor-changes-0-3-8","dir":"Changelog","previous_headings":"","what":"MINOR CHANGES","title":"rdefra 0.3.8","text":"Removed obsolete packages ‘Suggests’ Fixed invalid URIs following directory looks like leftover knitr","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"rdefra-036","dir":"Changelog","previous_headings":"","what":"rdefra 0.3.6","title":"rdefra 0.3.6","text":"CRAN release: 2019-03-18","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"bug-fixes-0-3-6","dir":"Changelog","previous_headings":"","what":"BUG FIXES","title":"rdefra 0.3.6","text":"SiteID = NA causes hanging errors #6 Different variables ukair_get_coordinates() inputs fed differently #7","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"minor-changes-0-3-6","dir":"Changelog","previous_headings":"","what":"MINOR CHANGES","title":"rdefra 0.3.6","text":"function ukair_get_coords back original name ukair_get_coordinates","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"rdefra-035","dir":"Changelog","previous_headings":"","what":"rdefra 0.3.5","title":"rdefra 0.3.5","text":"CRAN release: 2018-07-08","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"minor-fixes-0-3-5","dir":"Changelog","previous_headings":"","what":"MINOR FIXES","title":"rdefra 0.3.5","text":"Functions updated due recent modification catalogue API.","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"minor-improvements-0-3-5","dir":"Changelog","previous_headings":"","what":"MINOR IMPROVEMENTS","title":"rdefra 0.3.5","text":"Changes made scanning package using goodpractice: * lines longer 80 characters * 84% code coverage * function names shorter 30 characters - function ukair_get_coordinates now renamed ukair_get_coords","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"rdefra-034","dir":"Changelog","previous_headings":"","what":"rdefra 0.3.4","title":"rdefra 0.3.4","text":"CRAN release: 2017-03-20","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"minor-improvements-0-3-4","dir":"Changelog","previous_headings":"","what":"MINOR IMPROVEMENTS","title":"rdefra 0.3.4","text":"Changes DESCRIPTION file: Added rmarkdown knitr Suggests Added entry VignetteBuilder: knitr Changed links new ropenscilabs github account (ropenscilabs instead kehraProject) repo now transferred ropenscilabs github account.","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"rdefra-033","dir":"Changelog","previous_headings":"","what":"rdefra 0.3.3","title":"rdefra 0.3.3","text":"release package moved root directory (needed based ropensci review) related adjustments made.","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"minor-fixes-0-3-3","dir":"Changelog","previous_headings":"","what":"MINOR FIXES","title":"rdefra 0.3.3","text":"Corrected units README (#2) Merged README_files folder assets? (#3)","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"rdefra-032","dir":"Changelog","previous_headings":"","what":"rdefra 0.3.2","title":"rdefra 0.3.2","text":"Accepted pubblication JOSS","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"rdefra-031","dir":"Changelog","previous_headings":"","what":"rdefra 0.3.1","title":"rdefra 0.3.1","text":"Minor changes","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"rdefra-030","dir":"Changelog","previous_headings":"","what":"rdefra 0.3.0","title":"rdefra 0.3.0","text":"Minor fixes","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"rdefra-020","dir":"Changelog","previous_headings":"","what":"rdefra 0.2.0","title":"rdefra 0.2.0","text":"Added unist tests (using testthat framework), Added Travis CI integration Added vignette Added paper submission JOSS Added document review package ropensci project","code":""},{"path":"https://docs.ropensci.org/rdefra/news/index.html","id":"rdefra-010","dir":"Changelog","previous_headings":"","what":"rdefra 0.1.0","title":"rdefra 0.1.0","text":"Initial release","code":""}]
